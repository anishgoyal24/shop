version: "3.3"

services:

  server:
    container_name: notifications-server
    image: notifications:server
    restart: always
    build:
      dockerfile: Dockerfile
      context: ./server
    volumes:
      # Avoid overwriting container's node_modules folder
      - /usr/app/node_modules
    depends_on:
      - mongodb
    links:
      - mongodb

volumes:

  data_db:
    driver: local
    driver_opts:
      type: none
      device: ${PWD}/data/db
      o: bind

  data_uploads:
    driver: local
    driver_opts:
      type: none
      device: ${PWD}/data/uploads
      o: bind